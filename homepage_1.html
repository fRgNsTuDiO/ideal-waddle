<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Penilaian Layanan Toko — Light / Dark</title>
  <style>
    :root{
      --bg: #f5f7fb;
      --card: #ffffff;
      --text: #0f1724;
      --muted: #6b7280;
      --accent: #ffb020;
      --radius: 14px;
      --shadow: 0 8px 24px rgba(15,23,36,0.06);
    }
    .dark {
      --bg: #0b1220;
      --card: #071122;
      --text: #e6eef8;
      --muted: #98a0b3;
      --accent: #f6c85f;
      --shadow: 0 10px 30px rgba(2,6,23,0.8);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.04), transparent 10%),
                  linear-gradient(180deg,var(--bg),var(--bg));
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:28px;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .wrap{
      width:100%;
      max-width:920px;
      display:grid;
      grid-template-columns: 240px 1fr;
      gap:20px;
      align-items:start;
    }

    /* Left column (image / logo) */
    .left {
      background:linear-gradient(180deg, rgba(255,255,255,0.03), transparent);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:center;
    }
    .logo{
      width:160px;
      height:160px;
      border-radius:12px;
      background-size:cover;
      background-position:center;
      box-shadow: 0 6px 20px rgba(2,6,23,0.08), inset 0 -6px 16px rgba(0,0,0,0.06);
      border: 1px solid rgba(255,255,255,0.03);
    }
    .thumb{
      width:100%;
      height:120px;
      border-radius:10px;
      background-size:cover;
      background-position:center;
      margin-top:6px;
      border: 1px solid rgba(255,255,255,0.03);
    }
    .theme-toggle{
      margin-top:auto;
      display:flex;
      gap:8px;
      align-items:center;
      width:100%;
      justify-content:center;
    }

    /* Right column (card) */
    .card{
      background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.02));
      border-radius: var(--radius);
      padding:22px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,0.04);
    }
    .shop-row{
      display:flex;
      gap:14px;
      align-items:center;
    }
    .shop-avatar{
      width:64px;height:64px;border-radius:10px;background-size:cover;background-position:center;border:1px solid rgba(0,0,0,0.04)
    }
    .shop-info{
      display:flex;flex-direction:column;
    }
    .shop-name{
      font-size:18px;font-weight:700;
      line-height:1;
      outline:none;
    }
    .shop-meta{font-size:13px;color:var(--muted);margin-top:6px}

    .rating-box{
      margin-top:18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
      padding:18px;border-radius:12px;border:1px solid rgba(0,0,0,0.03);
      display:flex;flex-direction:column;gap:12px;
    }

    .stars{
      display:flex;gap:8px;align-items:center;
    }
    .star{
      width:46px;height:46px;border-radius:10px;display:inline-grid;place-items:center;
      font-size:22px;cursor:pointer;user-select:none;
      transition:transform .12s ease, box-shadow .12s ease;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border:1px solid rgba(0,0,0,0.04);
    }
    .star:hover{ transform: translateY(-4px); box-shadow: 0 8px 20px rgba(2,6,23,0.08); }
    .star.active{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.0));
      box-shadow: 0 10px 26px rgba(0,0,0,0.08);
    }

    .star svg{ filter: drop-shadow(0 2px 6px rgba(0,0,0,0.12)); }

    .rating-result{
      margin-top:6px;
      padding-top:6px;
      border-top:1px dashed rgba(0,0,0,0.04);
      color:var(--muted);
      font-size:14px;
      display:flex;gap:12px;align-items:center;flex-wrap:wrap;
    }

    /* small helpers */
    .btn {
      border: none;
      padding:8px 12px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      color:var(--text);
      outline:1px solid rgba(0,0,0,0.04);
    }
    .small{font-size:13px;padding:6px 10px;border-radius:9px}
    .muted{color:var(--muted)}
    input[type="text"]{font-size:16px;padding:6px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:transparent;color:var(--text)}
    label.small{font-size:12px;color:var(--muted)}

    footer.note{margin-top:14px;font-size:13px;color:var(--muted)}
    @media (max-width:840px){
      .wrap{grid-template-columns:1fr; padding:12px;}
      .left{flex-direction:row;gap:12px;padding:12px}
      .logo{width:96px;height:96px}
    }
  </style>
</head>
<body>
  <div class="wrap" id="app">
    <!-- LEFT: Images & theme switch -->
    <div class="left">
      <div id="logo" class="logo" aria-hidden="true"></div>
      <div id="thumb" class="thumb" aria-hidden="true"></div>

      <div style="width:100%;display:flex;flex-direction:column;gap:8px;margin-top:8px">
        <label class="small muted">Logo URL</label>
        <input id="logoUrl" type="text" placeholder="https://example.com/logo.png" />
        <label class="small muted">Thumbnail URL</label>
        <input id="thumbUrl" type="text" placeholder="https://example.com/thumb.jpg" />
      </div>

      <div class="theme-toggle">
        <button id="lightBtn" class="btn small">Terang</button>
        <button id="darkBtn"  class="btn small">Gelap</button>
      </div>
    </div>

    <!-- RIGHT: shop info + rating -->
    <div class="card">
      <div class="shop-row">
        <div id="shopAvatar" class="shop-avatar" aria-hidden="true"></div>
        <div class="shop-info">
          <div contenteditable="true" id="shopName" class="shop-name" aria-label="Nama toko">Nama Toko Contoh</div>
          <div class="shop-meta">
            <span id="shopLocation">Lokasi: Jakarta</span> • <span id="shopCategory">Kategori: Retail</span>
          </div>
        </div>
      </div>

      <div class="rating-box" aria-label="Kotak penilaian">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700;font-size:15px">Nilai Layanan</div>
            <div class="muted" style="font-size:13px">Klik bintang untuk memberi penilaian (1 - 5)</div>
          </div>
          <div style="text-align:right">
            <div class="muted small">Rating saat ini</div>
            <div id="numericScore" style="font-weight:800;font-size:18px">0.0</div>
          </div>
        </div>

        <div class="stars" id="stars" role="radiogroup" aria-label="Penilaian bintang">
          <!-- stars inserted by JS -->
        </div>

        <!-- DI SINI: penilaian numerik & teks (letak di bawah kotak penilaian) -->
        <div class="rating-result" id="ratingResult" aria-live="polite">
          <div id="ratingText" class="muted">Belum ada penilaian.</div>
          <div style="margin-left:auto">
            <button id="resetBtn" class="btn small">Reset</button>
          </div>
        </div>

        <footer class="note">Catatan: semua gambar diambil dari link di kolom kiri — ganti link lalu tekan Enter untuk memperbarui.</footer>
      </div>
    </div>
  </div>

  <script>
    /****************************************************************
     * Konfigurasi awal (ubah nilai default link & shop name di sini)
     ****************************************************************/
    const DEFAULTS = {
      theme: localStorage.getItem('shop_theme') || 'light', // 'light' or 'dark'
      logoUrl: localStorage.getItem('shop_logo') || 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=3e2a6a3c8f2f3b9d8c5f5b8e6d0a6f6a',
      thumbUrl: localStorage.getItem('shop_thumb') || 'https://images.unsplash.com/photo-1542834369-f10ebf06d3cb?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3&s=8f9b7d6c2d9e7a6b5c4d3e2f1a0b9c8d',
      avatarUrl: localStorage.getItem('shop_avatar') || 'https://images.unsplash.com/photo-1545239351-1141bd82e8a6?q=80&w=400&auto=format&fit=crop&ixlib=rb-4.0.3&s=7b6f5e4d3c2b1a0f9e8d7c6b5a4b3c2d',
      shopName: localStorage.getItem('shop_name') || 'Toko Firguna'
    };

    // DOM refs
    const app = document.getElementById('app');
    const logo = document.getElementById('logo');
    const thumb = document.getElementById('thumb');
    const logoUrlIn = document.getElementById('logoUrl');
    const thumbUrlIn = document.getElementById('thumbUrl');
    const shopAvatar = document.getElementById('shopAvatar');
    const shopNameEl = document.getElementById('shopName');
    const numericScore = document.getElementById('numericScore');
    const ratingText = document.getElementById('ratingText');
    const ratingResult = document.getElementById('ratingResult');
    const starsWrap = document.getElementById('stars');
    const lightBtn = document.getElementById('lightBtn');
    const darkBtn = document.getElementById('darkBtn');
    const resetBtn = document.getElementById('resetBtn');

    // state
    let currentTheme = DEFAULTS.theme;
    let rating = Number(localStorage.getItem('shop_rating') || 0);

    // helper: set backgrounds from URLs
    function setImages(logoUrl, thumbUrl, avatarUrl){
      logo.style.backgroundImage = `url("${logoUrl}")`;
      thumb.style.backgroundImage = `url("${thumbUrl}")`;
      shopAvatar.style.backgroundImage = `url("${avatarUrl}")`;
      // store
      localStorage.setItem('shop_logo', logoUrl);
      localStorage.setItem('shop_thumb', thumbUrl);
      localStorage.setItem('shop_avatar', avatarUrl);
    }

    // init image input values
    logoUrlIn.value = DEFAULTS.logoUrl;
    thumbUrlIn.value = DEFAULTS.thumbUrl;
    setImages(DEFAULTS.logoUrl, DEFAULTS.thumbUrl, DEFAULTS.avatarUrl);

    // apply theme
    function applyTheme(t){
      if(t === 'dark') document.documentElement.classList.add('dark');
      else document.documentElement.classList.remove('dark');
      localStorage.setItem('shop_theme', t);
      currentTheme = t;
    }
    applyTheme(currentTheme);

    lightBtn.addEventListener('click', ()=>applyTheme('light'));
    darkBtn.addEventListener('click', ()=>applyTheme('dark'));

    // Update images when user edits the inputs and presses Enter or leaves field
    function attachImageInputHandlers(){
      logoUrlIn.addEventListener('change', ()=> setImages(logoUrlIn.value || DEFAULTS.logoUrl, thumbUrlIn.value || DEFAULTS.thumbUrl, DEFAULTS.avatarUrl));
      thumbUrlIn.addEventListener('change', ()=> setImages(logoUrlIn.value || DEFAULTS.logoUrl, thumbUrlIn.value || DEFAULTS.thumbUrl, DEFAULTS.avatarUrl));
      // also allow Enter
      [logoUrlIn, thumbUrlIn].forEach(input=>{
        input.addEventListener('keydown', (e)=>{
          if(e.key === 'Enter'){
            e.preventDefault();
            input.blur();
            setImages(logoUrlIn.value || DEFAULTS.logoUrl, thumbUrlIn.value || DEFAULTS.thumbUrl, DEFAULTS.avatarUrl);
          }
        });
      });
    }
    attachImageInputHandlers();

    // shop name editable handler
    shopNameEl.textContent = DEFAULTS.shopName;
    shopNameEl.addEventListener('input', ()=>{
      localStorage.setItem('shop_name', shopNameEl.textContent.trim());
    });

    // create star buttons (1..5)
    function makeStarSVG(filled){
      // simple star path
      return `
        <svg width="22" height="22" viewBox="0 0 24 24" fill="${filled ? 'currentColor' : 'none'}" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M12 .587l3.668 7.431 8.2 1.2-5.934 5.788 1.4 8.166L12 18.896l-7.334 3.876 1.4-8.166L.132 9.218l8.2-1.2z" stroke="currentColor" stroke-width="0.6"/>
        </svg>`;
    }

    function renderStars(current){
      starsWrap.innerHTML = '';
      for(let i=1;i<=5;i++){
        const b = document.createElement('button');
        b.className = 'star';
        b.setAttribute('role','radio');
        b.setAttribute('aria-checked', String(i===Math.round(current)));
        b.setAttribute('aria-label', `${i} bintang`);
        b.dataset.value = i;
        // highlight visually if <= rating
        const filled = i <= Math.round(current);
        b.innerHTML = makeStarSVG(filled);
        // click sets rating
        b.addEventListener('click', ()=> {
          rating = i;
          localStorage.setItem('shop_rating', rating);
          updateRatingUI();
        });
        // hover preview
        b.addEventListener('mouseover', ()=> {
          renderStarsHover(i);
        });
        b.addEventListener('mouseout', ()=> {
          renderStars(rating);
        });
        starsWrap.appendChild(b);
      }
    }

    function renderStarsHover(hoverVal){
      Array.from(starsWrap.children).forEach((el,idx)=>{
        const i = idx + 1;
        el.innerHTML = makeStarSVG(i <= hoverVal);
      });
    }

    function updateRatingUI(){
      renderStars(rating);
      numericScore.textContent = (rating ? rating.toFixed(1) : '0.0');
      if(!rating){
        ratingText.textContent = 'Belum ada penilaian.';
        ratingText.classList.add('muted');
      } else {
        // simple mapping text
        const txt = ['Sangat Buruk','Buruk','Cukup','Bagus','Sangat Bagus'][rating-1];
        ratingText.textContent = `${rating} / 5 — ${txt} — Diberikan untuk "${shopNameEl.textContent.trim() || 'Toko'}"`;
        ratingText.classList.remove('muted');
      }
    }

    // reset
    resetBtn.addEventListener('click', ()=>{
      rating = 0;
      localStorage.removeItem('shop_rating');
      updateRatingUI();
    });

    // initialize
    renderStars(rating);
    updateRatingUI();

    // Accessibility: allow keyboard rating
    starsWrap.addEventListener('keydown', (e)=>{
      const key = e.key;
      if(['ArrowRight','ArrowUp','ArrowLeft','ArrowDown','Home','End','Enter',' '].includes(key)){
        e.preventDefault();
        if(key === 'ArrowRight' || key === 'ArrowUp') rating = Math.min(5, rating + 1 || 1);
        if(key === 'ArrowLeft' || key === 'ArrowDown') rating = Math.max(1, rating - 1 || 0);
        if(key === 'Home') rating = 1;
        if(key === 'End') rating = 5;
        if(key === 'Enter' || key === ' ') {
          // no-op (already set)
        }
        localStorage.setItem('shop_rating', rating);
        updateRatingUI();
      }
    });

    // small: let user press Ctrl+S to save name (prevent browser save)
    document.addEventListener('keydown', (e)=> {
      if((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 's'){
        e.preventDefault();
        localStorage.setItem('shop_name', shopNameEl.textContent.trim());
        alert('Nama toko disimpan.');
      }
    });

    // load persisted values into UI (if present)
    (function loadPersisted(){
      const persistedLogo = localStorage.getItem('shop_logo');
      const persistedThumb = localStorage.getItem('shop_thumb');
      const persistedAvatar = localStorage.getItem('shop_avatar');
      const persistedName = localStorage.getItem('shop_name');
      if(persistedLogo) logoUrlIn.value = persistedLogo;
      if(persistedThumb) thumbUrlIn.value = persistedThumb;
      if(persistedLogo || persistedThumb || persistedAvatar) setImages(logoUrlIn.value || DEFAULTS.logoUrl, thumbUrlIn.value || DEFAULTS.thumbUrl, persistedAvatar || DEFAULTS.avatarUrl);
      if(persistedName) shopNameEl.textContent = persistedName;
    })();

  </script>
</body>
</html>